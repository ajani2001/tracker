<template name="point">
    {{#if record}}
    <div class="point">
        {{#autoForm id=autoFormId type="method-update" schema=editingSchema meteormethod="location.updatePoint" collection=collection doc=record }}
        <table width="100%" border="0">
            <tr>
                <td width="10%">latitude</td>
                <td width="10%">longitude</td>
                <td width="10%">time</td>
                <td width="35%">address</td>
                <td width="30%">your description</td>
                {{#if edit}}
                <td width="5%" rowspan="2">
                    <button type="submit" class="btn btn-primary">SAVE</button>
                </td>
                {{/if}}
            </tr>
            <tr>
                <td>{{ record.location.coords.latitude }}</td>
                <td>{{ record.location.coords.longitude }}</td>
                <td>{{ record.time.toLocaleString }}</td>
                <td>
                    {{#if edit}}
                        {{> afFieldInput name="address" }}
                    {{else}}
                        {{ #if record.address }}
                            {{record.address}}
                        {{ else }}
                            <button type="null" class="getAddress">Get address</button>
                        {{ /if }}
                    {{/if}}
                </td>
                <td>
                    {{#if edit}}
                        {{> afFieldInput name="description" rows=6 }}
                    {{else}}
                        {{ #if record.description }}
                            {{record.description}}
                        {{ else }}
                            there's no description for this point
                        {{ /if }}
                    {{/if}}
                </td>
            </tr>
        </table>
        {{/autoForm}}
    </div>
    {{/if}}
</template>